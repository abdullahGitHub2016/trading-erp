import{m as M,r as _,f as r,b as n,u as a,h as L,w as f,d as e,i as c,a as u,o as l,q as g,j as p,F as x,g as v,t as d,n as w,l as S}from"./app-DhMa9BIp.js";import{A as j}from"./AuthLayout-BITznstG.js";import{P as z,T as I}from"./trash-2-Be6CLe4a.js";import{c as b}from"./x-CEVAYI9T.js";import{C as N}from"./circle-alert-PEU5T2pF.js";const A=b("CircleCheckIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const B=b("CircleXIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const H=b("ClockIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const V=b("PencilIcon",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),$={class:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8"},F={class:"flex items-center gap-3"},O={class:"bg-white border border-slate-200 rounded-2xl overflow-hidden shadow-sm"},U={class:"w-full text-left border-collapse"},q={class:"divide-y divide-slate-100"},X={class:"p-4 font-bold text-blue-600"},E={class:"p-4"},G={class:"font-semibold text-slate-800"},J={class:"p-4 text-slate-500 text-sm italic"},K={class:"p-4 text-right font-black text-slate-900"},Q={class:"p-4"},R={class:"p-4"},W={class:"flex items-center justify-end gap-1"},Y=["onClick"],Z={key:0},ee={class:"mt-6 flex justify-center items-center gap-1"},te=["innerHTML"],se={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm"},le={class:"bg-white rounded-3xl max-w-md w-full p-8 shadow-2xl"},ae={class:"w-16 h-16 bg-red-100 text-red-600 rounded-full flex items-center justify-center mb-6 mx-auto"},re={class:"text-center text-slate-500 mb-8"},oe={class:"font-bold"},pe=M({__name:"Index",props:{purchases:{}},setup(h){const m=_(!1),i=_(null),C=o=>{i.value=o,m.value=!0},y=()=>{m.value=!1,i.value=null},D=()=>{i.value&&S.delete(`/purchases/${i.value}`,{onSuccess:()=>y()})},P=o=>{switch(o){case"received":return"bg-emerald-50 text-emerald-700 border-emerald-100";case"pending":return"bg-amber-50 text-amber-700 border-amber-100";case"cancelled":return"bg-red-50 text-red-700 border-red-100";default:return"bg-slate-50 text-slate-700 border-slate-100"}},T=o=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(o);return(o,s)=>(l(),r(x,null,[n(a(L),{title:"Purchase Orders"}),n(j,null,{default:f(()=>[e("div",$,[s[1]||(s[1]=e("div",null,[e("h1",{class:"text-2xl font-bold text-slate-900 tracking-tight"},"Purchase Management"),e("p",{class:"text-slate-500 text-sm"},"Track inventory intake and supplier payments.")],-1)),e("div",F,[o.$page.props.auth?.user?.permissions?.includes("purchase.create")?(l(),u(a(g),{key:0,href:"/purchases/create",class:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-5 py-2.5 rounded-xl font-bold transition shadow-lg shadow-blue-200"},{default:f(()=>[n(a(z),{class:"w-4 h-4"}),s[0]||(s[0]=p(" Create Purchase ",-1))]),_:1})):c("",!0)])]),e("div",O,[e("table",U,[s[3]||(s[3]=e("thead",null,[e("tr",{class:"bg-slate-50 border-b border-slate-200 text-[11px] uppercase font-black text-slate-500 tracking-widest"},[e("th",{class:"p-4 w-48"},"PO Number"),e("th",{class:"p-4"},"Supplier"),e("th",{class:"p-4"},"Date"),e("th",{class:"p-4 text-right"},"Total Amount"),e("th",{class:"p-4 text-center"},"Status"),e("th",{class:"p-4 text-right"},"Actions")])],-1)),e("tbody",q,[(l(!0),r(x,null,v(h.purchases.data,t=>(l(),r("tr",{key:t.id,class:"hover:bg-slate-50/50 transition-colors"},[e("td",X,d(t.purchase_no),1),e("td",E,[e("div",G,d(t.supplier?.name||"Unknown"),1)]),e("td",J,d(t.purchase_date),1),e("td",K,d(T(t.total_amount)),1),e("td",Q,[e("span",{class:w([P(t.status),"mx-auto flex items-center justify-center gap-1.5 w-max px-3 py-1 border rounded-full text-[10px] font-black uppercase tracking-tight"])},[t.status==="pending"?(l(),u(a(H),{key:0,class:"w-3 h-3"})):c("",!0),t.status==="received"?(l(),u(a(A),{key:1,class:"w-3 h-3"})):c("",!0),t.status==="cancelled"?(l(),u(a(B),{key:2,class:"w-3 h-3"})):c("",!0),p(" "+d(t.status),1)],2)]),e("td",R,[e("div",W,[n(a(g),{href:`/purchases/${t.id}/edit`,class:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition"},{default:f(()=>[n(a(V),{class:"w-4 h-4"})]),_:1},8,["href"]),e("button",{onClick:k=>C(t.id),class:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition"},[n(a(I),{class:"w-4 h-4"})],8,Y)])])]))),128)),h.purchases.data.length===0?(l(),r("tr",Z,[...s[2]||(s[2]=[e("td",{colspan:"6",class:"p-12 text-center text-slate-400"},' No purchases found. Click "Create Purchase" to start. ',-1)])])):c("",!0)])])]),e("div",ee,[(l(!0),r(x,null,v(h.purchases.links,(t,k)=>(l(),r(x,{key:k},[t.url===null?(l(),r("span",{key:0,innerHTML:t.label,class:"px-4 py-2 text-sm text-slate-400 border border-slate-100 rounded-lg cursor-not-allowed"},null,8,te)):(l(),u(a(g),{key:1,href:t.url,innerHTML:t.label,class:w(["px-4 py-2 text-sm rounded-lg border transition-colors",t.active?"bg-blue-600 text-white border-blue-600 font-bold":"bg-white text-slate-600 border-slate-200 hover:bg-slate-50"])},null,8,["href","innerHTML","class"]))],64))),128))]),m.value?(l(),r("div",se,[e("div",le,[e("div",ae,[n(a(N),{class:"w-8 h-8"})]),s[6]||(s[6]=e("h3",{class:"text-xl font-bold text-center text-slate-900 mb-2"},"Delete Purchase?",-1)),e("p",re,[s[4]||(s[4]=p(" Are you sure you want to delete purchase ",-1)),e("span",oe,"#"+d(i.value),1),s[5]||(s[5]=p("? ",-1))]),e("div",{class:"grid grid-cols-2 gap-3"},[e("button",{onClick:y,class:"px-6 py-3 bg-slate-100 text-slate-600 rounded-xl font-bold"},"Cancel"),e("button",{onClick:D,class:"px-6 py-3 bg-red-600 text-white rounded-xl font-bold"},"Delete")])])])):c("",!0)]),_:1})],64))}});export{pe as default};
